{"{\"assumptions\":{},\"sourceRoot\":\"/home/tomhuang/Desktop/AVM_antoine/backend/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/tomhuang/Desktop/AVM_antoine/backend\",\"filename\":\"/home/tomhuang/Desktop/AVM_antoine/backend/src/server.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/tomhuang/Desktop/AVM_antoine/backend\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.22.9:development":{"value":{"code":"// import http from 'http'\nimport express from 'express';\n// import mongoose from 'mongoose'\nimport WebSocket from 'ws';\n// import mongo from './mongo.js'\nimport mysql from './mysql.js';\nimport wsConnect from './wsConnect.js';\nimport path from \"path\";\nconst {\n  Sequelize\n} = require('sequelize');\n\n// mongo.connect();\n// mysql.connect();\n\nconst app = express();\nif (process.env.NODE_ENV == \"production\") {\n  const __dirname = path.resolve();\n  console.log(__dirname);\n  app.use(express.static(path.join(__dirname, \"../frontend\", \"build\")));\n  app.get(\"/*\", function (req, res) {\n    res.sendFile(path.join(__dirname, \"../frontend\", \"build\", \"index.html\"));\n  });\n}\nconst server = http.createServer(app);\nconst wss = new WebSocket.Server({\n  server\n});\n// const db = mongoose.connection\nconst PORT = process.env.PORT || 3000;\nconst sequelize = new Sequelize('avm_little_knife', 'root', '', {\n  host: 'localhost',\n  dialect: 'mysql'\n});\nsequelize.authenticate().then(() => {\n  console.log(\"MySQLconnected\");\n  wss.on('connection', ws => {\n    console.log('ws readystate', ws.readyState);\n    wsConnect.onMessage(ws, wss);\n  });\n}).catch(error => {\n  console.log(error);\n  console.log(\"Error in connection\");\n});\n\n// db.once('open', () => {\n//     console.log(\"MongoDB connected!\");\n\n//     wss.on('connection', (ws) => {\n//         console.log('ws readystate', ws.readyState);\n//         wsConnect.onMessage(ws,wss);\n//     });\n// });\nserver.listen(PORT, () => {\n  console.log('listening at port 3000');\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwiV2ViU29ja2V0IiwibXlzcWwiLCJ3c0Nvbm5lY3QiLCJwYXRoIiwiU2VxdWVsaXplIiwicmVxdWlyZSIsImFwcCIsInByb2Nlc3MiLCJlbnYiLCJOT0RFX0VOViIsIl9fZGlybmFtZSIsInJlc29sdmUiLCJjb25zb2xlIiwibG9nIiwidXNlIiwic3RhdGljIiwiam9pbiIsImdldCIsInJlcSIsInJlcyIsInNlbmRGaWxlIiwic2VydmVyIiwiaHR0cCIsImNyZWF0ZVNlcnZlciIsIndzcyIsIlNlcnZlciIsIlBPUlQiLCJzZXF1ZWxpemUiLCJob3N0IiwiZGlhbGVjdCIsImF1dGhlbnRpY2F0ZSIsInRoZW4iLCJvbiIsIndzIiwicmVhZHlTdGF0ZSIsIm9uTWVzc2FnZSIsImNhdGNoIiwiZXJyb3IiLCJsaXN0ZW4iXSwic291cmNlUm9vdCI6Ii9ob21lL3RvbWh1YW5nL0Rlc2t0b3AvQVZNX2FudG9pbmUvYmFja2VuZC9zcmMvIiwic291cmNlcyI6WyJzZXJ2ZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gaW1wb3J0IGh0dHAgZnJvbSAnaHR0cCdcbmltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnXG4vLyBpbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnXG5pbXBvcnQgV2ViU29ja2V0IGZyb20gJ3dzJ1xuLy8gaW1wb3J0IG1vbmdvIGZyb20gJy4vbW9uZ28uanMnXG5pbXBvcnQgbXlzcWwgZnJvbSAnLi9teXNxbC5qcydcbmltcG9ydCB3c0Nvbm5lY3QgZnJvbSAnLi93c0Nvbm5lY3QuanMnXG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuXG5cbmNvbnN0IHsgU2VxdWVsaXplIH0gPSByZXF1aXJlKCdzZXF1ZWxpemUnKTtcblxuLy8gbW9uZ28uY29ubmVjdCgpO1xuLy8gbXlzcWwuY29ubmVjdCgpO1xuXG5jb25zdCBhcHAgPSBleHByZXNzKClcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PSBcInByb2R1Y3Rpb25cIil7XG4gICAgY29uc3QgX19kaXJuYW1lPXBhdGgucmVzb2x2ZSgpO1xuICAgIGNvbnNvbGUubG9nKF9fZGlybmFtZSk7XG4gICAgYXBwLnVzZShleHByZXNzLnN0YXRpYyhwYXRoLmpvaW4oX19kaXJuYW1lLFwiLi4vZnJvbnRlbmRcIixcImJ1aWxkXCIpKSk7XG4gICAgYXBwLmdldChcIi8qXCIsZnVuY3Rpb24ocmVxLHJlcyl7XG4gICAgICAgIHJlcy5zZW5kRmlsZShwYXRoLmpvaW4oX19kaXJuYW1lLFwiLi4vZnJvbnRlbmRcIixcImJ1aWxkXCIsXCJpbmRleC5odG1sXCIpKTtcbiAgICB9KTtcbn1cbmNvbnN0IHNlcnZlciA9IGh0dHAuY3JlYXRlU2VydmVyKGFwcClcbmNvbnN0IHdzcyA9IG5ldyBXZWJTb2NrZXQuU2VydmVyKHsgc2VydmVyIH0pXG4vLyBjb25zdCBkYiA9IG1vbmdvb3NlLmNvbm5lY3Rpb25cbmNvbnN0IFBPUlQgPSBwcm9jZXNzLmVudi5QT1JUIHx8IDMwMDA7XG5jb25zdCBzZXF1ZWxpemUgPSBuZXcgU2VxdWVsaXplKCdhdm1fbGl0dGxlX2tuaWZlJywgJ3Jvb3QnLCAnJywge1xuICAgIGhvc3Q6ICdsb2NhbGhvc3QnLFxuICAgIGRpYWxlY3Q6ICdteXNxbCcsXG4gIH0pO1xuXG4gIHNlcXVlbGl6ZS5hdXRoZW50aWNhdGUoKS50aGVuKCgpPT4ge1xuICAgIGNvbnNvbGUubG9nKFwiTXlTUUxjb25uZWN0ZWRcIik7XG4gICAgd3NzLm9uKCdjb25uZWN0aW9uJywgKHdzKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCd3cyByZWFkeXN0YXRlJywgd3MucmVhZHlTdGF0ZSk7XG4gICAgICAgIHdzQ29ubmVjdC5vbk1lc3NhZ2Uod3Msd3NzKTtcbiAgICB9KTsgXG4gICAgfSkuY2F0Y2goKGVycm9yKSA9PntcbiAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICAgIGNvbnNvbGUubG9nKFwiRXJyb3IgaW4gY29ubmVjdGlvblwiKVxuICB9KTtcblxuLy8gZGIub25jZSgnb3BlbicsICgpID0+IHtcbi8vICAgICBjb25zb2xlLmxvZyhcIk1vbmdvREIgY29ubmVjdGVkIVwiKTtcbiAgICBcbi8vICAgICB3c3Mub24oJ2Nvbm5lY3Rpb24nLCAod3MpID0+IHtcbi8vICAgICAgICAgY29uc29sZS5sb2coJ3dzIHJlYWR5c3RhdGUnLCB3cy5yZWFkeVN0YXRlKTtcbi8vICAgICAgICAgd3NDb25uZWN0Lm9uTWVzc2FnZSh3cyx3c3MpO1xuLy8gICAgIH0pO1xuLy8gfSk7XG5zZXJ2ZXIubGlzdGVuKFBPUlQsICgpID0+IHtjb25zb2xlLmxvZygnbGlzdGVuaW5nIGF0IHBvcnQgMzAwMCcpfSk7Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBLE9BQU9BLE9BQU8sTUFBTSxTQUFTO0FBQzdCO0FBQ0EsT0FBT0MsU0FBUyxNQUFNLElBQUk7QUFDMUI7QUFDQSxPQUFPQyxLQUFLLE1BQU0sWUFBWTtBQUM5QixPQUFPQyxTQUFTLE1BQU0sZ0JBQWdCO0FBQ3RDLE9BQU9DLElBQUksTUFBTSxNQUFNO0FBR3ZCLE1BQU07RUFBRUM7QUFBVSxDQUFDLEdBQUdDLE9BQU8sQ0FBQyxXQUFXLENBQUM7O0FBRTFDO0FBQ0E7O0FBRUEsTUFBTUMsR0FBRyxHQUFHUCxPQUFPLENBQUMsQ0FBQztBQUNyQixJQUFJUSxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsUUFBUSxJQUFJLFlBQVksRUFBQztFQUNyQyxNQUFNQyxTQUFTLEdBQUNQLElBQUksQ0FBQ1EsT0FBTyxDQUFDLENBQUM7RUFDOUJDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDSCxTQUFTLENBQUM7RUFDdEJKLEdBQUcsQ0FBQ1EsR0FBRyxDQUFDZixPQUFPLENBQUNnQixNQUFNLENBQUNaLElBQUksQ0FBQ2EsSUFBSSxDQUFDTixTQUFTLEVBQUMsYUFBYSxFQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7RUFDbkVKLEdBQUcsQ0FBQ1csR0FBRyxDQUFDLElBQUksRUFBQyxVQUFTQyxHQUFHLEVBQUNDLEdBQUcsRUFBQztJQUMxQkEsR0FBRyxDQUFDQyxRQUFRLENBQUNqQixJQUFJLENBQUNhLElBQUksQ0FBQ04sU0FBUyxFQUFDLGFBQWEsRUFBQyxPQUFPLEVBQUMsWUFBWSxDQUFDLENBQUM7RUFDekUsQ0FBQyxDQUFDO0FBQ047QUFDQSxNQUFNVyxNQUFNLEdBQUdDLElBQUksQ0FBQ0MsWUFBWSxDQUFDakIsR0FBRyxDQUFDO0FBQ3JDLE1BQU1rQixHQUFHLEdBQUcsSUFBSXhCLFNBQVMsQ0FBQ3lCLE1BQU0sQ0FBQztFQUFFSjtBQUFPLENBQUMsQ0FBQztBQUM1QztBQUNBLE1BQU1LLElBQUksR0FBR25CLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDa0IsSUFBSSxJQUFJLElBQUk7QUFDckMsTUFBTUMsU0FBUyxHQUFHLElBQUl2QixTQUFTLENBQUMsa0JBQWtCLEVBQUUsTUFBTSxFQUFFLEVBQUUsRUFBRTtFQUM1RHdCLElBQUksRUFBRSxXQUFXO0VBQ2pCQyxPQUFPLEVBQUU7QUFDWCxDQUFDLENBQUM7QUFFRkYsU0FBUyxDQUFDRyxZQUFZLENBQUMsQ0FBQyxDQUFDQyxJQUFJLENBQUMsTUFBSztFQUNqQ25CLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGdCQUFnQixDQUFDO0VBQzdCVyxHQUFHLENBQUNRLEVBQUUsQ0FBQyxZQUFZLEVBQUdDLEVBQUUsSUFBSztJQUN6QnJCLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGVBQWUsRUFBRW9CLEVBQUUsQ0FBQ0MsVUFBVSxDQUFDO0lBQzNDaEMsU0FBUyxDQUFDaUMsU0FBUyxDQUFDRixFQUFFLEVBQUNULEdBQUcsQ0FBQztFQUMvQixDQUFDLENBQUM7QUFDRixDQUFDLENBQUMsQ0FBQ1ksS0FBSyxDQUFFQyxLQUFLLElBQUk7RUFDakJ6QixPQUFPLENBQUNDLEdBQUcsQ0FBQ3dCLEtBQUssQ0FBQztFQUNsQnpCLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLHFCQUFxQixDQUFDO0FBQ3RDLENBQUMsQ0FBQzs7QUFFSjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQVEsTUFBTSxDQUFDaUIsTUFBTSxDQUFDWixJQUFJLEVBQUUsTUFBTTtFQUFDZCxPQUFPLENBQUNDLEdBQUcsQ0FBQyx3QkFBd0IsQ0FBQztBQUFBLENBQUMsQ0FBQyJ9","map":{"version":3,"names":["express","WebSocket","mysql","wsConnect","path","Sequelize","require","app","process","env","NODE_ENV","__dirname","resolve","console","log","use","static","join","get","req","res","sendFile","server","http","createServer","wss","Server","PORT","sequelize","host","dialect","authenticate","then","on","ws","readyState","onMessage","catch","error","listen"],"sourceRoot":"/home/tomhuang/Desktop/AVM_antoine/backend/src/","sources":["server.js"],"sourcesContent":["// import http from 'http'\nimport express from 'express'\n// import mongoose from 'mongoose'\nimport WebSocket from 'ws'\n// import mongo from './mongo.js'\nimport mysql from './mysql.js'\nimport wsConnect from './wsConnect.js'\nimport path from \"path\";\n\n\nconst { Sequelize } = require('sequelize');\n\n// mongo.connect();\n// mysql.connect();\n\nconst app = express()\nif (process.env.NODE_ENV == \"production\"){\n    const __dirname=path.resolve();\n    console.log(__dirname);\n    app.use(express.static(path.join(__dirname,\"../frontend\",\"build\")));\n    app.get(\"/*\",function(req,res){\n        res.sendFile(path.join(__dirname,\"../frontend\",\"build\",\"index.html\"));\n    });\n}\nconst server = http.createServer(app)\nconst wss = new WebSocket.Server({ server })\n// const db = mongoose.connection\nconst PORT = process.env.PORT || 3000;\nconst sequelize = new Sequelize('avm_little_knife', 'root', '', {\n    host: 'localhost',\n    dialect: 'mysql',\n  });\n\n  sequelize.authenticate().then(()=> {\n    console.log(\"MySQLconnected\");\n    wss.on('connection', (ws) => {\n        console.log('ws readystate', ws.readyState);\n        wsConnect.onMessage(ws,wss);\n    }); \n    }).catch((error) =>{\n      console.log(error);\n      console.log(\"Error in connection\")\n  });\n\n// db.once('open', () => {\n//     console.log(\"MongoDB connected!\");\n    \n//     wss.on('connection', (ws) => {\n//         console.log('ws readystate', ws.readyState);\n//         wsConnect.onMessage(ws,wss);\n//     });\n// });\nserver.listen(PORT, () => {console.log('listening at port 3000')});"],"mappings":"AAAA;AACA,OAAOA,OAAO,MAAM,SAAS;AAC7B;AACA,OAAOC,SAAS,MAAM,IAAI;AAC1B;AACA,OAAOC,KAAK,MAAM,YAAY;AAC9B,OAAOC,SAAS,MAAM,gBAAgB;AACtC,OAAOC,IAAI,MAAM,MAAM;AAGvB,MAAM;EAAEC;AAAU,CAAC,GAAGC,OAAO,CAAC,WAAW,CAAC;;AAE1C;AACA;;AAEA,MAAMC,GAAG,GAAGP,OAAO,CAAC,CAAC;AACrB,IAAIQ,OAAO,CAACC,GAAG,CAACC,QAAQ,IAAI,YAAY,EAAC;EACrC,MAAMC,SAAS,GAACP,IAAI,CAACQ,OAAO,CAAC,CAAC;EAC9BC,OAAO,CAACC,GAAG,CAACH,SAAS,CAAC;EACtBJ,GAAG,CAACQ,GAAG,CAACf,OAAO,CAACgB,MAAM,CAACZ,IAAI,CAACa,IAAI,CAACN,SAAS,EAAC,aAAa,EAAC,OAAO,CAAC,CAAC,CAAC;EACnEJ,GAAG,CAACW,GAAG,CAAC,IAAI,EAAC,UAASC,GAAG,EAACC,GAAG,EAAC;IAC1BA,GAAG,CAACC,QAAQ,CAACjB,IAAI,CAACa,IAAI,CAACN,SAAS,EAAC,aAAa,EAAC,OAAO,EAAC,YAAY,CAAC,CAAC;EACzE,CAAC,CAAC;AACN;AACA,MAAMW,MAAM,GAAGC,IAAI,CAACC,YAAY,CAACjB,GAAG,CAAC;AACrC,MAAMkB,GAAG,GAAG,IAAIxB,SAAS,CAACyB,MAAM,CAAC;EAAEJ;AAAO,CAAC,CAAC;AAC5C;AACA,MAAMK,IAAI,GAAGnB,OAAO,CAACC,GAAG,CAACkB,IAAI,IAAI,IAAI;AACrC,MAAMC,SAAS,GAAG,IAAIvB,SAAS,CAAC,kBAAkB,EAAE,MAAM,EAAE,EAAE,EAAE;EAC5DwB,IAAI,EAAE,WAAW;EACjBC,OAAO,EAAE;AACX,CAAC,CAAC;AAEFF,SAAS,CAACG,YAAY,CAAC,CAAC,CAACC,IAAI,CAAC,MAAK;EACjCnB,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAC;EAC7BW,GAAG,CAACQ,EAAE,CAAC,YAAY,EAAGC,EAAE,IAAK;IACzBrB,OAAO,CAACC,GAAG,CAAC,eAAe,EAAEoB,EAAE,CAACC,UAAU,CAAC;IAC3ChC,SAAS,CAACiC,SAAS,CAACF,EAAE,EAACT,GAAG,CAAC;EAC/B,CAAC,CAAC;AACF,CAAC,CAAC,CAACY,KAAK,CAAEC,KAAK,IAAI;EACjBzB,OAAO,CAACC,GAAG,CAACwB,KAAK,CAAC;EAClBzB,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAC;AACtC,CAAC,CAAC;;AAEJ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACAQ,MAAM,CAACiB,MAAM,CAACZ,IAAI,EAAE,MAAM;EAACd,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAC;AAAA,CAAC,CAAC"}},"mtime":1690391277183}}